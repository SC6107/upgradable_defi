import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
export const UserPortfolio = ({ account, loading, connected }) => {
    const formatValue = (value, decimals = 2) => {
        if (value === null || value === undefined)
            return '-';
        if (value >= 1e9)
            return `$${(value / 1e9).toFixed(2)}B`;
        if (value >= 1e6)
            return `$${(value / 1e6).toFixed(2)}M`;
        if (value >= 1e3)
            return `$${(value / 1e3).toFixed(2)}K`;
        return `$${value.toFixed(decimals)}`;
    };
    if (!connected) {
        return (_jsx("div", { className: "text-center py-12 bg-slate-800 rounded-lg border border-slate-700", children: _jsx("p", { className: "text-gray-400 text-lg", children: "Please connect your wallet to view your portfolio" }) }));
    }
    if (loading) {
        return (_jsx("div", { className: "flex items-center justify-center h-96", children: _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mb-4" }), _jsx("p", { className: "text-gray-400", children: "Loading portfolio..." })] }) }));
    }
    if (!account) {
        return (_jsx("div", { className: "text-center py-12 bg-slate-800 rounded-lg border border-slate-700", children: _jsx("p", { className: "text-gray-400 text-lg", children: "Failed to load portfolio" }) }));
    }
    return (_jsxs("div", { className: "space-y-6", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [_jsxs("div", { className: "bg-gradient-to-b from-slate-700 to-slate-800 rounded-lg p-6 border border-slate-600", children: [_jsx("p", { className: "text-sm text-gray-400 mb-2", children: "Account Liquidity" }), _jsxs("div", { className: "flex items-baseline gap-2", children: [_jsx("h3", { className: "text-3xl font-bold text-white", children: formatValue(account.liquidity, 2) }), _jsx("span", { className: `text-sm font-medium ${account.isHealthy ? 'text-green-400' : 'text-red-400'}`, children: account.isHealthy ? '✓ Healthy' : '⚠ At Risk' })] })] }), _jsxs("div", { className: "bg-gradient-to-b from-slate-700 to-slate-800 rounded-lg p-6 border border-slate-600", children: [_jsx("p", { className: "text-sm text-gray-400 mb-2", children: "Shortfall" }), _jsx("h3", { className: "text-3xl font-bold text-white", children: formatValue(account.shortfall, 2) })] }), _jsxs("div", { className: "bg-gradient-to-b from-slate-700 to-slate-800 rounded-lg p-6 border border-slate-600", children: [_jsx("p", { className: "text-sm text-gray-400 mb-2", children: "Total Supplied Assets" }), _jsx("h3", { className: "text-3xl font-bold text-white", children: account.positions.length > 0 ? account.positions.length : '0' }), _jsx("p", { className: "text-xs text-gray-400 mt-1", children: "positions" })] })] }), account.positions && account.positions.length > 0 ? (_jsx("div", { className: "bg-slate-800 rounded-lg border border-slate-700 overflow-hidden", children: _jsx("div", { className: "overflow-x-auto", children: _jsxs("table", { className: "w-full text-sm", children: [_jsx("thead", { className: "bg-slate-900 border-b border-slate-700", children: _jsxs("tr", { children: [_jsx("th", { className: "text-left px-6 py-4 font-semibold text-gray-300", children: "Asset" }), _jsx("th", { className: "text-right px-6 py-4 font-semibold text-gray-300", children: "Supply Balance" }), _jsx("th", { className: "text-right px-6 py-4 font-semibold text-gray-300", children: "Borrow Balance" }), _jsx("th", { className: "text-right px-6 py-4 font-semibold text-gray-300", children: "Price" }), _jsx("th", { className: "text-right px-6 py-4 font-semibold text-gray-300", children: "Collateral Factor" })] }) }), _jsx("tbody", { children: account.positions.map((position) => (_jsxs("tr", { className: "border-b border-slate-700 hover:bg-slate-700/50 transition-colors", children: [_jsx("td", { className: "px-6 py-4", children: _jsxs("div", { className: "flex items-center gap-3", children: [_jsx("div", { className: "flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white font-bold", children: position.symbol?.charAt(0) || '?' }), _jsxs("div", { children: [_jsx("p", { className: "font-semibold text-white", children: position.symbol || 'Unknown' }), _jsxs("p", { className: "text-xs text-gray-400", children: [position.market.slice(0, 10), "..."] })] })] }) }), _jsxs("td", { className: "text-right px-6 py-4", children: [_jsxs("div", { className: "text-white font-medium", children: [position.supplyUnderlying !== null && position.supplyUnderlying !== undefined
                                                            ? `${(position.supplyUnderlying / 10 ** (position.decimals || 18)).toFixed(4)}`
                                                            : '0', ' ', position.symbol] }), _jsx("p", { className: "text-xs text-gray-400", children: formatValue((position.supplyUnderlying || 0) * (position.price || 0) / 10 ** (position.decimals || 18), 2) })] }), _jsxs("td", { className: "text-right px-6 py-4", children: [_jsxs("div", { className: "text-white font-medium", children: [position.borrowBalance !== null && position.borrowBalance !== undefined
                                                            ? `${(position.borrowBalance / 10 ** (position.decimals || 18)).toFixed(4)}`
                                                            : '0', ' ', position.symbol] }), _jsx("p", { className: "text-xs text-gray-400", children: formatValue((position.borrowBalance || 0) * (position.price || 0) / 10 ** (position.decimals || 18), 2) })] }), _jsxs("td", { className: "text-right px-6 py-4 text-white font-medium", children: ["$", (position.price || 0).toFixed(4)] }), _jsx("td", { className: "text-right px-6 py-4", children: _jsx("span", { className: "text-white font-medium", children: position.collateralFactor !== null && position.collateralFactor !== undefined
                                                    ? `${(position.collateralFactor / 1e16).toFixed(0)}%`
                                                    : '-' }) })] }, position.market))) })] }) }) })) : (_jsx("div", { className: "text-center py-12 bg-slate-800 rounded-lg border border-slate-700", children: _jsx("p", { className: "text-gray-400 text-lg", children: "No positions yet" }) }))] }));
};
